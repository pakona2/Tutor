{"ast":null,"code":"var _jsxFileName = \"/workspaces/Tutor/src/pages/ReferralProgram.js\",\n  _s = $RefreshSig$(),\n  _s2 = $RefreshSig$(),\n  _s3 = $RefreshSig$(),\n  _s4 = $RefreshSig$();\n// ReferralFrontend.jsx\nimport React, { useEffect, useMemo, useState } from 'react';\nimport './TutorUpload.css'; // reuse existing app styles; optional\n\n// Configure API endpoint here or via env\n//const API_BASE = process.env.REACT_APP_API_BASE || 'http://localhost:4000';\n\n// --- Utility helpers ---\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst safeJson = async res => {\n  try {\n    return await res.json();\n  } catch {\n    return null;\n  }\n};\nconst getCurrentUser = () => {\n  return {\n    id: localStorage.getItem('user_id') || null,\n    name: localStorage.getItem('user_name') || null,\n    email: localStorage.getItem('user_email') || null\n  };\n};\n\n// --- ReferralProgram: invite UI and invite-by-email ---\nexport function ReferralProgram({\n  onStatsUpdated\n}) {\n  _s();\n  const user = getCurrentUser();\n  const referrerId = user.id || 'demo_user';\n  const [signedLink, setSignedLink] = useState(null);\n  const [copied, setCopied] = useState(false);\n  const [inviteEmail, setInviteEmail] = useState('');\n  const [statusMsg, setStatusMsg] = useState('');\n  const [loadingLink, setLoadingLink] = useState(false);\n\n  // build fallback link\n  const fallbackLink = `${window.location.origin}/register?ref=${encodeURIComponent(referrerId)}`;\n  useEffect(() => {\n    let cancelled = false;\n    async function fetchSignedLink() {\n      setLoadingLink(true);\n      try {\n        const res = await fetch(`${API_BASE}/api/referral/link?referrerId=${encodeURIComponent(referrerId)}`);\n        if (!res.ok) throw new Error('no signed link');\n        const json = await res.json();\n        if (!cancelled && json && json.signedLink) setSignedLink(json.signedLink);\n      } catch (e) {\n        setSignedLink(fallbackLink);\n      } finally {\n        if (!cancelled) setLoadingLink(false);\n      }\n    }\n    fetchSignedLink();\n    return () => {\n      cancelled = true;\n    };\n  }, [referrerId, fallbackLink]);\n  const referralLink = signedLink || fallbackLink;\n  const encodedLink = encodeURIComponent(referralLink);\n  const whatsappUrl = `https://wa.me/?text=${encodedLink}`;\n  const facebookUrl = `https://www.facebook.com/sharer/sharer.php?u=${encodedLink}`;\n  const twitterUrl = `https://twitter.com/intent/tweet?text=${encodeURIComponent(`Join me on MyTeacher: ${referralLink}`)}`;\n  const copyToClipboard = async () => {\n    try {\n      await navigator.clipboard.writeText(referralLink);\n      setCopied(true);\n      setTimeout(() => setCopied(false), 2000);\n      setStatusMsg('Link copied to clipboard.');\n    } catch {\n      setStatusMsg('Could not copy automatically. Select and copy manually.');\n    }\n  };\n  const sendInviteEmail = async () => {\n    setStatusMsg('');\n    if (!inviteEmail || !inviteEmail.includes('@')) {\n      setStatusMsg('Enter a valid email address.');\n      return;\n    }\n    try {\n      const res = await fetch(`${API_BASE}/api/referral/invite`, {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json'\n        },\n        body: JSON.stringify({\n          referrerId,\n          referrerName: user.name || 'Anonymous',\n          email: inviteEmail,\n          link: referralLink\n        })\n      });\n      const body = await safeJson(res);\n      if (res.ok) {\n        setStatusMsg('Invite recorded. An email was (simulated) sent.');\n        setInviteEmail('');\n        onStatsUpdated === null || onStatsUpdated === void 0 ? void 0 : onStatsUpdated();\n      } else {\n        setStatusMsg((body === null || body === void 0 ? void 0 : body.error) || 'Invite failed.');\n      }\n    } catch {\n      setStatusMsg('Network error while sending invite.');\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"upload-page\",\n    style: {\n      padding: 16\n    },\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"upload-container\",\n      style: {\n        maxWidth: 780\n      },\n      children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n        className: \"upload-title\",\n        children: \"Refer a friend \\u2014 get rewards\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 104,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        style: {\n          color: '#374151'\n        },\n        children: \"Share your referral link: when a friend signs up and completes the qualifying action, you both earn rewards.\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 106,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          marginTop: 12\n        },\n        children: [/*#__PURE__*/_jsxDEV(\"label\", {\n          style: {\n            fontWeight: 700\n          },\n          children: \"Your referral link\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 111,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"text\",\n          readOnly: true,\n          value: referralLink,\n          className: \"input-field\",\n          style: {\n            width: '100%',\n            marginTop: 8\n          }\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 112,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            display: 'flex',\n            gap: 8,\n            marginTop: 8,\n            flexWrap: 'wrap'\n          },\n          children: [/*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: copyToClipboard,\n            className: \"upload-button\",\n            style: {\n              background: '#6366f1',\n              color: '#fff'\n            },\n            children: copied ? 'Copied' : 'Copy link'\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 114,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"a\", {\n            className: \"link-button\",\n            href: whatsappUrl,\n            target: \"_blank\",\n            rel: \"noreferrer\",\n            children: \"WhatsApp\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 117,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"a\", {\n            className: \"link-button\",\n            href: facebookUrl,\n            target: \"_blank\",\n            rel: \"noreferrer\",\n            children: \"Facebook\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 118,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"a\", {\n            className: \"link-button\",\n            href: twitterUrl,\n            target: \"_blank\",\n            rel: \"noreferrer\",\n            children: \"Twitter\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 119,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 113,\n          columnNumber: 11\n        }, this), loadingLink && /*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            marginTop: 8,\n            color: '#6b7280'\n          },\n          children: \"Resolving secure link...\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 121,\n          columnNumber: 27\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 110,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          marginTop: 18\n        },\n        children: [/*#__PURE__*/_jsxDEV(\"label\", {\n          style: {\n            fontWeight: 700\n          },\n          children: \"Invite by email\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 125,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            display: 'flex',\n            gap: 8,\n            marginTop: 8\n          },\n          children: [/*#__PURE__*/_jsxDEV(\"input\", {\n            value: inviteEmail,\n            onChange: e => setInviteEmail(e.target.value),\n            placeholder: \"friend@example.com\",\n            className: \"input-field\",\n            style: {\n              flex: 1\n            }\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 127,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: sendInviteEmail,\n            className: \"upload-button\",\n            children: \"Send invite\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 128,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 126,\n          columnNumber: 11\n        }, this), statusMsg && /*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            marginTop: 8,\n            color: '#374151'\n          },\n          children: statusMsg\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 130,\n          columnNumber: 25\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 124,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          marginTop: 18,\n          padding: 12,\n          background: '#eef2ff',\n          borderRadius: 8\n        },\n        children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n          children: \"Promotion\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 134,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            marginTop: 6\n          },\n          children: \"Share the link and get 2 free sessions when your friend registers and completes their first session.\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 135,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 133,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 103,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 102,\n    columnNumber: 5\n  }, this);\n}\n\n// --- ReferralDashboard: shows referral stats and recent referred users ---\n_s(ReferralProgram, \"a1B70WGzAJmZsxbium0S+ELTWIA=\");\n_c = ReferralProgram;\nexport function ReferralDashboard() {\n  _s2();\n  const user = getCurrentUser();\n  const referrerId = user.id || 'demo_user';\n  const [stats, setStats] = useState(null);\n  const [loading, setLoading] = useState(true);\n  const loadStats = async () => {\n    setLoading(true);\n    try {\n      const res = await fetch(`${API_BASE}/api/referral/stats?referrerId=${encodeURIComponent(referrerId)}`);\n      const body = await safeJson(res);\n      setStats(body || {\n        invitesSent: 0,\n        signups: 0,\n        rewardsEarned: 0,\n        recent: []\n      });\n    } catch {\n      // fallback: derive from localStorage\n      const invites = JSON.parse(localStorage.getItem('referral_invites') || '[]').filter(i => i.referrerId === referrerId);\n      const referrals = JSON.parse(localStorage.getItem('referrals') || '[]').filter(r => r.referrerId === referrerId);\n      setStats({\n        invitesSent: invites.length,\n        signups: referrals.length,\n        rewardsEarned: 0,\n        recent: referrals.slice(-10).reverse()\n      });\n    } finally {\n      setLoading(false);\n    }\n  };\n  useEffect(() => {\n    loadStats();\n  }, []); // eslint-disable-line\n\n  if (loading) return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"upload-page\",\n    style: {\n      padding: 16\n    },\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"upload-container\",\n      style: {\n        maxWidth: 780\n      },\n      children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n        className: \"section-title\",\n        children: \"Referral stats\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 175,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        children: \"Loading...\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 176,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 174,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 173,\n    columnNumber: 5\n  }, this);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"upload-page\",\n    style: {\n      padding: 16\n    },\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"upload-container\",\n      style: {\n        maxWidth: 980\n      },\n      children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n        className: \"section-title\",\n        children: \"Your referral dashboard\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 184,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          display: 'grid',\n          gridTemplateColumns: 'repeat(3,1fr)',\n          gap: 12,\n          marginTop: 8\n        },\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            background: '#f8fafc',\n            padding: 12,\n            borderRadius: 8\n          },\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            style: {\n              fontWeight: 700,\n              fontSize: 20\n            },\n            children: (stats === null || stats === void 0 ? void 0 : stats.invitesSent) || 0\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 188,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            style: {\n              color: '#6b7280'\n            },\n            children: \"Invites sent\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 189,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 187,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            background: '#f8fafc',\n            padding: 12,\n            borderRadius: 8\n          },\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            style: {\n              fontWeight: 700,\n              fontSize: 20\n            },\n            children: (stats === null || stats === void 0 ? void 0 : stats.signups) || 0\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 192,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            style: {\n              color: '#6b7280'\n            },\n            children: \"Signups\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 193,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 191,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            background: '#f8fafc',\n            padding: 12,\n            borderRadius: 8\n          },\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            style: {\n              fontWeight: 700,\n              fontSize: 20\n            },\n            children: (stats === null || stats === void 0 ? void 0 : stats.rewardsEarned) || 0\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 196,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            style: {\n              color: '#6b7280'\n            },\n            children: \"Rewards\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 197,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 195,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 186,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          marginTop: 18\n        },\n        children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n          style: {\n            marginBottom: 8\n          },\n          children: \"Recent referrals\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 202,\n          columnNumber: 11\n        }, this), stats !== null && stats !== void 0 && stats.recent && stats.recent.length ? /*#__PURE__*/_jsxDEV(\"ul\", {\n          style: {\n            listStyle: 'none',\n            padding: 0\n          },\n          children: stats.recent.map(r => /*#__PURE__*/_jsxDEV(\"li\", {\n            style: {\n              padding: 8,\n              borderBottom: '1px solid #eef2f3'\n            },\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              style: {\n                fontWeight: 700\n              },\n              children: r.email || r.name || r.referredEmail || '—'\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 207,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              style: {\n                color: '#6b7280',\n                fontSize: 13\n              },\n              children: [r.status || r.status === 0 ? r.status : 'registered', \" \\u2022 \", new Date(r.createdAt || r.reportedAt || Date.now()).toLocaleString()]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 208,\n              columnNumber: 19\n            }, this)]\n          }, r.id || r.referralId || Math.random(), true, {\n            fileName: _jsxFileName,\n            lineNumber: 206,\n            columnNumber: 17\n          }, this))\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 204,\n          columnNumber: 13\n        }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"muted\",\n          children: \"No recent referrals\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 212,\n          columnNumber: 15\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 201,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 183,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 182,\n    columnNumber: 5\n  }, this);\n}\n\n// --- ReferralRegisterHandler: call on your registration page to attach referral to new user ---\n// Usage: include <ReferralRegisterHandler /> on your registration success page or call registerReferralFromUrl()\n_s2(ReferralDashboard, \"zr3d2rzWUuuAzE7RwCrYeGz8vE0=\");\n_c2 = ReferralDashboard;\nexport function ReferralRegisterHandler({\n  afterRegister\n}) {\n  _s3();\n  const [status, setStatus] = useState('idle');\n  useEffect(() => {\n    async function process() {\n      try {\n        setStatus('checking');\n        // read URL params\n        const params = new URLSearchParams(window.location.search);\n        const token = params.get('r'); // signed token\n        const ref = params.get('ref'); // referrer id\n        if (!token && !ref) {\n          setStatus('no-ref');\n          afterRegister === null || afterRegister === void 0 ? void 0 : afterRegister();\n          return;\n        }\n\n        // get new user info: replace with your auth system\n        const currentUser = getCurrentUser();\n        const payload = {\n          referredEmail: currentUser.email || null,\n          referredUserId: currentUser.id || null\n        };\n        if (token) payload.token = token;else payload.referrerId = ref;\n        setStatus('registering');\n        const res = await fetch(`${API_BASE}/api/referral/register`, {\n          method: 'POST',\n          headers: {\n            'Content-Type': 'application/json'\n          },\n          body: JSON.stringify(payload)\n        });\n        if (res.ok) {\n          setStatus('attached');\n          // call afterRegister hook (e.g., continue onboarding)\n          afterRegister === null || afterRegister === void 0 ? void 0 : afterRegister();\n        } else {\n          const json = await safeJson(res);\n          // If backend missing, fallback to localStorage entry\n          if (res.status === 404 || res.status === 500) {\n            // fallback - store local referral record for later server sync\n            const refList = JSON.parse(localStorage.getItem('referrals') || '[]');\n            refList.push({\n              id: Date.now().toString(),\n              referrerId: payload.referrerId || 'unknown',\n              referredUserId: payload.referredUserId,\n              referredEmail: payload.referredEmail,\n              createdAt: new Date().toISOString(),\n              status: 'registered'\n            });\n            localStorage.setItem('referrals', JSON.stringify(refList));\n            setStatus('attached-offline');\n            afterRegister === null || afterRegister === void 0 ? void 0 : afterRegister();\n          } else {\n            setStatus('error');\n          }\n        }\n      } catch (err) {\n        // network error fallback\n        setStatus('offline-fallback');\n        afterRegister === null || afterRegister === void 0 ? void 0 : afterRegister();\n      }\n    }\n    process();\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, []);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    style: {\n      padding: 8\n    },\n    children: [status === 'checking' && /*#__PURE__*/_jsxDEV(\"div\", {\n      children: \"Checking referral...\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 290,\n      columnNumber: 33\n    }, this), status === 'registering' && /*#__PURE__*/_jsxDEV(\"div\", {\n      children: \"Attaching referral...\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 291,\n      columnNumber: 36\n    }, this), status === 'attached' && /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        color: '#16a34a'\n      },\n      children: \"Referral attached.\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 292,\n      columnNumber: 33\n    }, this), status === 'attached-offline' && /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        color: '#f59e0b'\n      },\n      children: \"Referral saved locally (will sync later).\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 293,\n      columnNumber: 41\n    }, this), status === 'no-ref' && /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        color: '#6b7280'\n      },\n      children: \"No referral present.\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 294,\n      columnNumber: 31\n    }, this), status === 'error' && /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        color: '#b91c1c'\n      },\n      children: \"Could not attach referral.\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 295,\n      columnNumber: 30\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 289,\n    columnNumber: 5\n  }, this);\n}\n\n// --- Export default combined view (Program + Dashboard) for convenience ---\n_s3(ReferralRegisterHandler, \"xb9jgeLHXSrMkv/3eQwZQbuAuiM=\");\n_c3 = ReferralRegisterHandler;\nexport default function ReferralFrontend() {\n  _s4();\n  const [refreshKey, setRefreshKey] = useState(0);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: [/*#__PURE__*/_jsxDEV(ReferralProgram, {\n      onStatsUpdated: () => setRefreshKey(k => k + 1)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 305,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(ReferralDashboard, {}, refreshKey, false, {\n      fileName: _jsxFileName,\n      lineNumber: 306,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 304,\n    columnNumber: 5\n  }, this);\n}\n_s4(ReferralFrontend, \"XcZNmAccQatn2dt77ivv6vE4zbc=\");\n_c4 = ReferralFrontend;\nvar _c, _c2, _c3, _c4;\n$RefreshReg$(_c, \"ReferralProgram\");\n$RefreshReg$(_c2, \"ReferralDashboard\");\n$RefreshReg$(_c3, \"ReferralRegisterHandler\");\n$RefreshReg$(_c4, \"ReferralFrontend\");","map":{"version":3,"names":["React","useEffect","useMemo","useState","jsxDEV","_jsxDEV","safeJson","res","json","getCurrentUser","id","localStorage","getItem","name","email","ReferralProgram","onStatsUpdated","_s","user","referrerId","signedLink","setSignedLink","copied","setCopied","inviteEmail","setInviteEmail","statusMsg","setStatusMsg","loadingLink","setLoadingLink","fallbackLink","window","location","origin","encodeURIComponent","cancelled","fetchSignedLink","fetch","API_BASE","ok","Error","e","referralLink","encodedLink","whatsappUrl","facebookUrl","twitterUrl","copyToClipboard","navigator","clipboard","writeText","setTimeout","sendInviteEmail","includes","method","headers","body","JSON","stringify","referrerName","link","error","className","style","padding","children","maxWidth","fileName","_jsxFileName","lineNumber","columnNumber","color","marginTop","fontWeight","type","readOnly","value","width","display","gap","flexWrap","onClick","background","href","target","rel","onChange","placeholder","flex","borderRadius","_c","ReferralDashboard","_s2","stats","setStats","loading","setLoading","loadStats","invitesSent","signups","rewardsEarned","recent","invites","parse","filter","i","referrals","r","length","slice","reverse","gridTemplateColumns","fontSize","marginBottom","listStyle","map","borderBottom","referredEmail","status","Date","createdAt","reportedAt","now","toLocaleString","referralId","Math","random","_c2","ReferralRegisterHandler","afterRegister","_s3","setStatus","process","params","URLSearchParams","search","token","get","ref","currentUser","payload","referredUserId","refList","push","toString","toISOString","setItem","err","_c3","ReferralFrontend","_s4","refreshKey","setRefreshKey","k","_c4","$RefreshReg$"],"sources":["/workspaces/Tutor/src/pages/ReferralProgram.js"],"sourcesContent":["// ReferralFrontend.jsx\nimport React, { useEffect, useMemo, useState } from 'react';\nimport './TutorUpload.css'; // reuse existing app styles; optional\n\n// Configure API endpoint here or via env\n//const API_BASE = process.env.REACT_APP_API_BASE || 'http://localhost:4000';\n\n// --- Utility helpers ---\nconst safeJson = async (res) => {\n  try { return await res.json(); } catch { return null; }\n};\n\nconst getCurrentUser = () => {\n  return {\n    id: localStorage.getItem('user_id') || null,\n    name: localStorage.getItem('user_name') || null,\n    email: localStorage.getItem('user_email') || null\n  };\n};\n\n// --- ReferralProgram: invite UI and invite-by-email ---\nexport function ReferralProgram({ onStatsUpdated }) {\n  const user = getCurrentUser();\n  const referrerId = user.id || 'demo_user';\n  const [signedLink, setSignedLink] = useState(null);\n  const [copied, setCopied] = useState(false);\n  const [inviteEmail, setInviteEmail] = useState('');\n  const [statusMsg, setStatusMsg] = useState('');\n  const [loadingLink, setLoadingLink] = useState(false);\n\n  // build fallback link\n  const fallbackLink = `${window.location.origin}/register?ref=${encodeURIComponent(referrerId)}`;\n\n  useEffect(() => {\n    let cancelled = false;\n    async function fetchSignedLink() {\n      setLoadingLink(true);\n      try {\n        const res = await fetch(`${API_BASE}/api/referral/link?referrerId=${encodeURIComponent(referrerId)}`);\n        if (!res.ok) throw new Error('no signed link');\n        const json = await res.json();\n        if (!cancelled && json && json.signedLink) setSignedLink(json.signedLink);\n      } catch (e) {\n        setSignedLink(fallbackLink);\n      } finally {\n        if (!cancelled) setLoadingLink(false);\n      }\n    }\n    fetchSignedLink();\n    return () => { cancelled = true; };\n  }, [referrerId, fallbackLink]);\n\n  const referralLink = signedLink || fallbackLink;\n  const encodedLink = encodeURIComponent(referralLink);\n\n  const whatsappUrl = `https://wa.me/?text=${encodedLink}`;\n  const facebookUrl = `https://www.facebook.com/sharer/sharer.php?u=${encodedLink}`;\n  const twitterUrl = `https://twitter.com/intent/tweet?text=${encodeURIComponent(`Join me on MyTeacher: ${referralLink}`)}`;\n\n  const copyToClipboard = async () => {\n    try {\n      await navigator.clipboard.writeText(referralLink);\n      setCopied(true);\n      setTimeout(() => setCopied(false), 2000);\n      setStatusMsg('Link copied to clipboard.');\n    } catch {\n      setStatusMsg('Could not copy automatically. Select and copy manually.');\n    }\n  };\n\n  const sendInviteEmail = async () => {\n    setStatusMsg('');\n    if (!inviteEmail || !inviteEmail.includes('@')) {\n      setStatusMsg('Enter a valid email address.');\n      return;\n    }\n    try {\n      const res = await fetch(`${API_BASE}/api/referral/invite`, {\n        method: 'POST',\n        headers: { 'Content-Type': 'application/json' },\n        body: JSON.stringify({\n          referrerId,\n          referrerName: user.name || 'Anonymous',\n          email: inviteEmail,\n          link: referralLink\n        })\n      });\n      const body = await safeJson(res);\n      if (res.ok) {\n        setStatusMsg('Invite recorded. An email was (simulated) sent.');\n        setInviteEmail('');\n        onStatsUpdated?.();\n      } else {\n        setStatusMsg(body?.error || 'Invite failed.');\n      }\n    } catch {\n      setStatusMsg('Network error while sending invite.');\n    }\n  };\n\n  return (\n    <div className=\"upload-page\" style={{ padding: 16 }}>\n      <div className=\"upload-container\" style={{ maxWidth: 780 }}>\n        <h1 className=\"upload-title\">Refer a friend — get rewards</h1>\n\n        <p style={{ color: '#374151' }}>\n          Share your referral link: when a friend signs up and completes the qualifying action, you both earn rewards.\n        </p>\n\n        <div style={{ marginTop: 12 }}>\n          <label style={{ fontWeight: 700 }}>Your referral link</label>\n          <input type=\"text\" readOnly value={referralLink} className=\"input-field\" style={{ width: '100%', marginTop: 8 }} />\n          <div style={{ display: 'flex', gap: 8, marginTop: 8, flexWrap: 'wrap' }}>\n            <button onClick={copyToClipboard} className=\"upload-button\" style={{ background: '#6366f1', color: '#fff' }}>\n              {copied ? 'Copied' : 'Copy link'}\n            </button>\n            <a className=\"link-button\" href={whatsappUrl} target=\"_blank\" rel=\"noreferrer\">WhatsApp</a>\n            <a className=\"link-button\" href={facebookUrl} target=\"_blank\" rel=\"noreferrer\">Facebook</a>\n            <a className=\"link-button\" href={twitterUrl} target=\"_blank\" rel=\"noreferrer\">Twitter</a>\n          </div>\n          {loadingLink && <div style={{ marginTop: 8, color: '#6b7280' }}>Resolving secure link...</div>}\n        </div>\n\n        <div style={{ marginTop: 18 }}>\n          <label style={{ fontWeight: 700 }}>Invite by email</label>\n          <div style={{ display: 'flex', gap: 8, marginTop: 8 }}>\n            <input value={inviteEmail} onChange={(e) => setInviteEmail(e.target.value)} placeholder=\"friend@example.com\" className=\"input-field\" style={{ flex: 1 }} />\n            <button onClick={sendInviteEmail} className=\"upload-button\">Send invite</button>\n          </div>\n          {statusMsg && <div style={{ marginTop: 8, color: '#374151' }}>{statusMsg}</div>}\n        </div>\n\n        <div style={{ marginTop: 18, padding: 12, background: '#eef2ff', borderRadius: 8 }}>\n          <strong>Promotion</strong>\n          <div style={{ marginTop: 6 }}>Share the link and get 2 free sessions when your friend registers and completes their first session.</div>\n        </div>\n      </div>\n    </div>\n  );\n}\n\n// --- ReferralDashboard: shows referral stats and recent referred users ---\nexport function ReferralDashboard() {\n  const user = getCurrentUser();\n  const referrerId = user.id || 'demo_user';\n  const [stats, setStats] = useState(null);\n  const [loading, setLoading] = useState(true);\n\n  const loadStats = async () => {\n    setLoading(true);\n    try {\n      const res = await fetch(`${API_BASE}/api/referral/stats?referrerId=${encodeURIComponent(referrerId)}`);\n      const body = await safeJson(res);\n      setStats(body || { invitesSent: 0, signups: 0, rewardsEarned: 0, recent: [] });\n    } catch {\n      // fallback: derive from localStorage\n      const invites = JSON.parse(localStorage.getItem('referral_invites') || '[]').filter(i => i.referrerId === referrerId);\n      const referrals = JSON.parse(localStorage.getItem('referrals') || '[]').filter(r => r.referrerId === referrerId);\n      setStats({\n        invitesSent: invites.length,\n        signups: referrals.length,\n        rewardsEarned: 0,\n        recent: referrals.slice(-10).reverse()\n      });\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  useEffect(() => { loadStats(); }, []); // eslint-disable-line\n\n  if (loading) return (\n    <div className=\"upload-page\" style={{ padding: 16 }}>\n      <div className=\"upload-container\" style={{ maxWidth: 780 }}>\n        <h2 className=\"section-title\">Referral stats</h2>\n        <div>Loading...</div>\n      </div>\n    </div>\n  );\n\n  return (\n    <div className=\"upload-page\" style={{ padding: 16 }}>\n      <div className=\"upload-container\" style={{ maxWidth: 980 }}>\n        <h2 className=\"section-title\">Your referral dashboard</h2>\n\n        <div style={{ display: 'grid', gridTemplateColumns: 'repeat(3,1fr)', gap: 12, marginTop: 8 }}>\n          <div style={{ background: '#f8fafc', padding: 12, borderRadius: 8 }}>\n            <div style={{ fontWeight: 700, fontSize: 20 }}>{stats?.invitesSent || 0}</div>\n            <div style={{ color: '#6b7280' }}>Invites sent</div>\n          </div>\n          <div style={{ background: '#f8fafc', padding: 12, borderRadius: 8 }}>\n            <div style={{ fontWeight: 700, fontSize: 20 }}>{stats?.signups || 0}</div>\n            <div style={{ color: '#6b7280' }}>Signups</div>\n          </div>\n          <div style={{ background: '#f8fafc', padding: 12, borderRadius: 8 }}>\n            <div style={{ fontWeight: 700, fontSize: 20 }}>{stats?.rewardsEarned || 0}</div>\n            <div style={{ color: '#6b7280' }}>Rewards</div>\n          </div>\n        </div>\n\n        <div style={{ marginTop: 18 }}>\n          <h3 style={{ marginBottom: 8 }}>Recent referrals</h3>\n          {stats?.recent && stats.recent.length ? (\n            <ul style={{ listStyle: 'none', padding: 0 }}>\n              {stats.recent.map((r) => (\n                <li key={r.id || r.referralId || Math.random()} style={{ padding: 8, borderBottom: '1px solid #eef2f3' }}>\n                  <div style={{ fontWeight: 700 }}>{r.email || r.name || r.referredEmail || '—'}</div>\n                  <div style={{ color: '#6b7280', fontSize: 13 }}>{r.status || r.status === 0 ? r.status : 'registered'} • {new Date(r.createdAt || r.reportedAt || Date.now()).toLocaleString()}</div>\n                </li>\n              ))}\n            </ul>\n          ) : <div className=\"muted\">No recent referrals</div>}\n        </div>\n      </div>\n    </div>\n  );\n}\n\n// --- ReferralRegisterHandler: call on your registration page to attach referral to new user ---\n// Usage: include <ReferralRegisterHandler /> on your registration success page or call registerReferralFromUrl()\nexport function ReferralRegisterHandler({ afterRegister }) {\n  const [status, setStatus] = useState('idle');\n\n  useEffect(() => {\n    async function process() {\n      try {\n        setStatus('checking');\n        // read URL params\n        const params = new URLSearchParams(window.location.search);\n        const token = params.get('r'); // signed token\n        const ref = params.get('ref'); // referrer id\n        if (!token && !ref) {\n          setStatus('no-ref');\n          afterRegister?.();\n          return;\n        }\n\n        // get new user info: replace with your auth system\n        const currentUser = getCurrentUser();\n        const payload = {\n          referredEmail: currentUser.email || null,\n          referredUserId: currentUser.id || null\n        };\n        if (token) payload.token = token;\n        else payload.referrerId = ref;\n\n        setStatus('registering');\n        const res = await fetch(`${API_BASE}/api/referral/register`, {\n          method: 'POST',\n          headers: { 'Content-Type': 'application/json' },\n          body: JSON.stringify(payload)\n        });\n        if (res.ok) {\n          setStatus('attached');\n          // call afterRegister hook (e.g., continue onboarding)\n          afterRegister?.();\n        } else {\n          const json = await safeJson(res);\n          // If backend missing, fallback to localStorage entry\n          if (res.status === 404 || res.status === 500) {\n            // fallback - store local referral record for later server sync\n            const refList = JSON.parse(localStorage.getItem('referrals') || '[]');\n            refList.push({\n              id: Date.now().toString(),\n              referrerId: payload.referrerId || 'unknown',\n              referredUserId: payload.referredUserId,\n              referredEmail: payload.referredEmail,\n              createdAt: new Date().toISOString(),\n              status: 'registered'\n            });\n            localStorage.setItem('referrals', JSON.stringify(refList));\n            setStatus('attached-offline');\n            afterRegister?.();\n          } else {\n            setStatus('error');\n          }\n        }\n      } catch (err) {\n        // network error fallback\n        setStatus('offline-fallback');\n        afterRegister?.();\n      }\n    }\n    process();\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, []);\n\n  return (\n    <div style={{ padding: 8 }}>\n      {status === 'checking' && <div>Checking referral...</div>}\n      {status === 'registering' && <div>Attaching referral...</div>}\n      {status === 'attached' && <div style={{ color: '#16a34a' }}>Referral attached.</div>}\n      {status === 'attached-offline' && <div style={{ color: '#f59e0b' }}>Referral saved locally (will sync later).</div>}\n      {status === 'no-ref' && <div style={{ color: '#6b7280' }}>No referral present.</div>}\n      {status === 'error' && <div style={{ color: '#b91c1c' }}>Could not attach referral.</div>}\n    </div>\n  );\n}\n\n// --- Export default combined view (Program + Dashboard) for convenience ---\nexport default function ReferralFrontend() {\n  const [refreshKey, setRefreshKey] = useState(0);\n  return (\n    <div>\n      <ReferralProgram onStatsUpdated={() => setRefreshKey(k => k + 1)} />\n      <ReferralDashboard key={refreshKey} />\n    </div>\n  );\n}\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}